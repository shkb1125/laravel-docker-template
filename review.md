# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
- SELECT * FROM テーブル名;

### Todoモデルのallメソッドの返り値は何か
- Collectionクラス

### 配列の代わりにCollectionクラスを使用するメリットは
- collectionクラスには`all()`や`groupBy()`など、データを加工するための便利なメソッドがたくさんあるというメリットがあります。

### view関数の第1・第2引数の指定と何をしているか
- 第1引数：表示させたいBladeファイル  
- 第2引数：Bladeファイルに渡したいデータを連想配列の形で渡す

### index.blade.phpの$todos・$todoに代入されているものは何か
- $todos：collectionクラスのitemプロパティにarray(配列)でtodoインスタンスで格納されている。  
- $todo：todosテーブルのレコード

## Todo作成機能

### Requestクラスのallメソッドは何をしているか
- 送信された情報を配列で受け取っています。

### fillメソッドは何をしているか
- 引数に用意された配列の値をモデルのプロパティに代入しています。

### $fillableは何のために設定しているか
- fill()によって書き換え可能なカラムを指定するために設定しています。  
書き換え可能なカラムを指定しない場合、悪意のあるユーザーが意図しないデータの保存・更新を行う「複数代入」という攻撃を受ける可能性があります。

### saveメソッドで実行しているSQLは何か
- 'INSERT INTO `todos` (`content`, `updated_at`, `created_at`) VALUES (?, ?, ?)';  
bind：0 => "入力内容"
      1 => "2024-07-19 02:26:40"
      2 => "2024-07-19 02:26:40"

### redirect()->route()は何をしているか
- ルーティングで名前つきで定義したルートのページにリダイレクトさせます。

<!-- 以下、今回のコードに含まれていない内容のためコメントアウトしています。 -->
<!-- ### RequestクラスからFormRequestクラスに変更した理由 -->
<!-- ### $errorsのhasメソッドの引数・返り値は何か -->
<!-- ### $errorsのfirstメソッドの引数・返り値は何か -->

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
- 現在のデータベースの状態を他の開発者に共有することができます。

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
- up()：`php artisan migrate`(マイグレーション実行コマンド)
- down()：`php artisan migrate:rollback`(マイグレーションのロールバックコマンド)

### Seederクラスの役割は何か
- テストデータの作成と投入を行います。

<!-- 以下、今回のコードに含まれていない内容のためコメントアウトしています。 -->
<!-- ### TodoControllerクラスのコンストラクタはどのタイミングで実行されるか -->

### route関数の引数・返り値・使用するメリット
- route関数の引数：ルート名  
- 返り値：ルートパラメータ(ルート名やパラメータに基づいて生成されたurl)  
- 使用するメリット：ルートのURIが変更されても、route関数を使用することで修正しやすくなり、保守性の向上に繋がります

### @extends・@section・@yieldの関係性とbladeを分割するメリット
- @extend：引数でviewsフォルダにある指定したファイルを継承することで、指定したファイルの中身をそのまま表示します。
- @section：@extendsで呼び出したビューファイルの中の、対応する@yeildにで指定した箇所に内容を表示させます。
- @yield：@extendsで呼び出すビューの中に記述し、第1引数でセクション名を指定することで、@extendsが記載してあるファイルに記載してある対応する@sectionの内容が@yieldの部分に入ります。
- bladeを分割するメリット：同一の記述量を減らせるため可読性と修正箇所の統一により保守性が上がります。

### @csrfは何のための記述か
- csrf対策のために記述します。  
formタグ内に記述する必要があり、データ送信時にトークンを自動生成します。

### {{ }}とは
- 変数展開する際にエスケープ処理をします。  
XSS攻撃を防ぐため、自動的にPHPのhtmlspecialchars関数を通されます。